{
    "extends": [
        "os.inception.profile/source/profile.proto.json"
    ],
    "uuid": "04782e3e-33ad-40af-ad02-495b2fbba392",
    "upstream": {
        "packages": {
            "os-inception": [
                "../os.inception/services/*/*",
                "../devcomp/_upstream/*/*"
            ]
        },
        "catalogs": {
            "os-inception": {
                "uri": "http://assets.pinf.io/catalog/os-inception~0",
                "headers": {
                    "x-pio.catalog-key": "37a1043d-596a-4bd5-bf60-6d057b30dec2"
                }
            }
        }
    },
    "mappings": {
        "os.inception.profile": "os-inception/os.inception.profile"
    },
    "config": {
        "pio": {
            "domain": "firebug.io",
            "namespace": "firebug-io"
        },
        "pio.dns": {
            "adapters": {
                "dnsimple": {
                    "email": "{{env.DNSIMPLE_EMAIL}}",
                    "token": "{{env.DNSIMPLE_TOKEN}}"
                }
            }
        }        
    },
    "services": {
        "1-io.pinf": {
            "io.pinf.server.smi": {
                "config": {
                    "host": "assets.{{config.pio.hostname}}",
                    "catalogs": {
                        "os-inception~dev": {
                            "uri": "http://assets.pinf.io/catalog/os-inception~dev",
                            "headers": {
                                "x-pio.catalog-key": "37a1043d-596a-4bd5-bf60-6d057b30dec2"
                            }
                        },
                        "os-inception~int": {
                            "uri": "http://assets.pinf.io/catalog/os-inception~0",
                            "headers": {
                                "x-pio.catalog-key": "37a1043d-596a-4bd5-bf60-6d057b30dec2"
                            }
                        },
                        "os-inception~prod": {
                            "uri": "http://assets.pinf.io/catalog/os-inception~0",
                            "headers": {
                                "x-pio.catalog-key": "37a1043d-596a-4bd5-bf60-6d057b30dec2"
                            }
                        },
                        "/os-inception~rev~(.*)/": {
                            "uri": "http://assets.pinf.io/catalog/os-inception~rev~$1",
                            "headers": {
                                "x-pio.catalog-key": "37a1043d-596a-4bd5-bf60-6d057b30dec2"
                            }
                        }
                    }
                },
                "config.plugin": {
                    "pio.proxy": {
                        "vhosts": {
                            "assets.{{config.pio.hostname}}": "127.0.0.1:8109"
                        }
                    },
                    "pio.dns": {
                        "records": {
                            "{{config.pio.hostname}}": {
                                "domain": "{{config.pio.domain}}",
                                "type": "A",
                                "data": "{{config['pio.vm'].ip}}"
                            },
                            "assets.{{config.pio.hostname}}": {
                                "domain": "{{config.pio.domain}}",
                                "type": "CNAME",
                                "data": "{{config.pio.hostname}}"
                            }
                        }
                    }
                }
            }
        }
    }
}